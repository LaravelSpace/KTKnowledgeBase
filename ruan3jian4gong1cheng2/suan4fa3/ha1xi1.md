## 哈希算法

将任意长度的二进制串映射为固定长度的二进制串

映射规则就是哈希算法，映射后的二进制串就是哈希值

哈希值不能反向推导出原始数据

对输入数据非常敏感，原始数据改了一个Bit，哈希值也要大不相同

散列冲突概率要小，对于不同原始数据，哈希值相同的概率非常小

哈希算法要尽量高效，针对长文本，也能快速计算哈希值

散列冲突无法避免，鸽巢原理，抽屉原理

### 应用场景

##### 安全加密

MD5，信息摘要算法，128Bit位

SHA，安全散列算法，SHA-1，SHA-256

DES，数据加密标准

AES，高级加密标准

没有绝对安全的加密算法，越复杂，越难破解的加密算法，计算时间也越长

字典攻击，撞库攻击，可以在用户的密码前面加一段，然后再计算哈希

##### 唯一标识

计算机中任何文件都可以用二进制码串表示，可以截取前100位和后100位，组成一个串

然后用这个串计算出来的哈希值作为数据唯一标识，这样就避免了全文比对

通过哈希值快速找到目标文件后，再进行全文比对，校验是不是同一个文件

##### 数据校验

BT下载

将一个文件分成100块，分别计算哈希值，然后放到种子文件里

下载器将下载下来的数据块，计算哈希并和种子文件比对

这么做可以确认数据块是否完整，也可以防范恶意篡改数据

##### 散列函数

散列函数也是哈希算法的一种应用

##### 负载均衡

负载均很算法很多，轮询，随机，加权轮询

会话粘滞的负载均衡，客户端的同一次会话的所有请求都路由到同一个服务器

最直接的办法，维护映射表，问题是内存和扩容

哈希算法，计算哈希值，取模，然后分配到服务器

##### 数据分片

分析容量巨大的文件，比如从日志文件里统计关键词

两个问题，内存不够：一台机器无法保存全部的结果，速度太慢：一台机器处理太慢

先将文件分片放到不同的服务器上，然后将结果计算哈希，取模，放到对应的机器上，最后合并

处理海量文件时，也可以用类似的思路

##### 分布式存储

这里和数据分片有点像，区别是数据分片是为了处理数据，分布式存储是为了存储数据

###### 一致性哈希算法

假设有k台机器，如果按照一般的哈希算法将数据分到k台机器上

在需要加一台机器的时候，就面临所有的数据都要迁移的问题

对于这个问题，我们可以将整个范围划分成m块(m远大于k)，每台机器负责m/k个块

这样在加机器的时候，只需要迁移一小部分数据块就行了