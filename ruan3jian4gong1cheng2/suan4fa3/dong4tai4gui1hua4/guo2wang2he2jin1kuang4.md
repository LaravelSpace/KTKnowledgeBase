## 国王的金矿

### 问题描述

背景：有一个国家发现了5座金矿，每座金矿的黄金储量不同，需要参与挖掘的工人数也不同。参与挖矿工人的总数是10人。每座金矿要么全挖，要么不挖，不能派出一半人挖取一半金矿。

设：400/5(金/人)，500/5(金/人)，200/3(金/人)，300/4(金/人)，350/3(金/人)。问：要想得到尽可能多的黄金，应该选择挖取哪几座金矿？

### 数学建模

暴力的解法可以用排列组合，依次列举每一个金矿挖或不挖的情况，会生成一个二叉树形状的结构。然后筛除工人总数超过10人的组合。最后计算剩下的各个组合的黄金总数，比较并得出最大值。这是正向思考解决问题的思路。

如果反过来想，5座金矿10个人的最优解，取决于最后一个金矿挖不挖。那么问题就可以分解成比较挖最后一个金矿+前4座金矿10-n个人的最优解和不挖最后一个金矿+前四座金矿10个人的最优解这两种情况。

设：金矿数量为n，人的数量为m，金矿的黄金数量为数组`g[]`，金矿的用人数量为数组`w[]`。那么可以得到下面这几个关系：1、金矿不够或者人不够都得0；2、只有一座金矿，人再多也是`g[0]`；3、金矿和人都有一定的数量，这里就是上文的最优解的情况。最后总结一下就可以得到下面的这组关系公式：
$$
当n<1,w<p[0]时，f(n,m)=0\\
当n=1,w \geq p[0]时，f(n,m)=g[0]\\
当n>1,w<p[n-1]时，f(n,m)=f(n-1,m)\\
当n>1,w \geq p[n-1]时，f(n,m)=Max(f(n-1,m),f(n-1,m-p[n-1])+g[n-1])
$$

### 动态规划

$当n>1,w \geq p[n-1]时，f(n,m)=Max(f(n-1,m),f(n-1,m-p[n-1])+g[n-1])$。这个就是本题需要找到的变化关系。根据公式可以比较清晰地写出递归算法。

不过这个问题更适合用动态规划求解。这个问题有两个参数，这里可以用一张表格表示，表格第一行表示工人数量，表格第一列表示第几个金矿，表格对应位置就是，对应条件下的最优解。

|      | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 1    | 0    | 0    | 0    | 0    | 400  | 400  | 400  | 400  | 400  | 400  |
| 2    | 0    | 0    | 0    | 0    | 500  | 500  | 500  | 500  | 500  | 900  |
| 3    | 0    | 0    | 200  | 200  | 500  | 500  | 500  | 700  | 700  | 900  |
| 4    | 0    | 0    | 200  | 300  | 500  | 500  | 500  | 700  | 800  | 900  |
| 5    | 0    | 0    | 350  | 350  | 500  | 550  | 650  | 850  | 850  | 900  |

- 第一行的数据比较好理解，这时候只有第一座金矿。
- 第二行的数据从(2,5)开始，要换公式了：$f(2,5)=Max(f(1,5),f(1,0)+500)$
- 第三行的数据从(3,3)开始就有数据了，因为第三座金矿只需要3个人。当人数增加到5个人的时候：$f(3,5)=Max(f(2,5),f(2,0)+200)$，这个时候f(2,5)的结果是更大的。
- 第四行和第五行用同样的方式可以推导出来。

从推导过程不难发现，下一行的数据只和上一行的数据有关系，所以如果想节约空间，可以只用两行的表格。